# CSharpStudy
C#の各種言語機能や、標準ライブラリに関するサンプルコード。

## C#参考サイト集

#### 言語全般について
* [未確認飛行 C#によるプログラム入門](http://ufcpp.net/study/csharp/)
    * 400ブクマを越える、超人気ホームページ。C#の基本的な文法はここ。
* [一週間で身につくC#言語の基本](http://csharp.sevendays-study.com/)

#### コーディング規約について
* [C# のコーディング規則 (C# プログラミング ガイド)](https://msdn.microsoft.com/ja-jp/library/ff926074.aspx)
    * MicroSoft公式。定期的に読む。
* [MSDN XML Documentation Tutorial](https://msdn.microsoft.com/en-us/library/aa288481(v=vs.71).aspx)
    * C#における、ドキュメント生成が可能なコメントの書き方。

#### 開発環境について
* [永久保存版 C#のイマドキな開発環境はこれなのですぞ。](http://toach.click/csharp-dev-2015/)
    * C#を使う場合のIDEや鉄板Lintツールについて。
    * Unity向けではないが、できるだけ早い段階でおさえたい。
    * 以下、各ツールの概要。
        * Resharper: リアルタイムソースチェック。有料らしいので要調査。
        * StyleCop: コーディング規約チェックツールの鉄板。
        * FxCop: アセンブリ後のコードをチェックして、非推奨の書き方をしていれば警告してくれるツール。

#### 例外
* [未確認飛行 例外処理](http://ufcpp.net/study/csharp/oo_exception.html)
    * C#における例外の基本。
    * 記事中盤の、C#の標準例外一覧表が嬉しい。
    * また、記事末尾の例外フィルター(複数の型の例外をまとめて処理)も嬉しい。
* [.NETの例外処理 Part.1](https://blogs.msdn.microsoft.com/nakama/2008/12/29/net-part-1/)
    * ソニックガーデンの伊藤さん一押しの神記事。以下、記事の要点サマリ。
    * エラーは、「業務エラー」と「想定外のエラー」の2つに分けて考える。
        * 業務エラー
            * ユーザにエラーの詳細を表示して、再試行を促す。
            * メソッドの戻り値などで、結果を伝播させる。
            * ex) ユーザ登録において、指定されたユーザIDが既に利用済み。
        * 想定外のエラー
            * アプリケーションが本来は想定していないエラーで、ユーザに詳細は見せたくないもの。
            * ex) メモリ不足、DBアクセス失敗、ネットワークアクセス失敗。
    * 業務エラーについて詳しく
        * 業務エラーを戻り値で返す方法3つ
            * null型: この方法は、nullの意味が曖昧なので、あまり好ましくない。
            * enum型: enumを使って詳細な情報を返してやる方法。Self-Descriptive(自己記述的)と呼ばれていて、可読性の面からも好ましい。
            * 構造体クラス型: 結果をクラスを使って返してやる方法。HTTP通信の結果など、詳細な結果を渡したい時はこれだろう。
    * 想定外のエラーについて詳しく
        * 想定外のエラーに関する大原則
            * 大原則として、アプリケーションの具体的なコードで、try-catchを書いてはいけない。
            * (理由は、アプリケーション中のあらゆる箇所で、try-catchによる似たようなエラーハンドル処理が書かれることになるからだろう)。
            * try-catchは原則NG。まともにアプリケーションが動作しなくなる場合は、早期的に例外をthrowして、ランタイムの末端で例外を処理させればいい。
                * ex) メソッドに予期しない引数を渡している、DB接続にエラーがあってまともに処理を継続できない。
            * ただし、通常の業務フローに戻れる場合は、try-catchで特定のエラーを拾っていい。
                * ex) 例えば、先程のユーザIDが登録済みのケース。この場合、DB側では重複レコード扱いになるだろうが、このエラーを飲み込んで戻り値に変換するのが正しい。
        * 想定外のエラーに対するUnitTestをどうするべきか。
            * これはテストでは無視してよく、目視によるコードレビューで通すだけでいい。
            * というのも、Assertやthrowで想定外のケースの場合に早期処理終了するのは、開発者のエラー早期発見を助けるため。
            * UnitTestはまともに動作するロジックの正当性を確かめるもの。想定外の状況に対するテストを書くのは非効率だし、開発者が目にする情報量を増やすことになるので意味がない。
    * この記事に対する疑問点
        * ライブラリを作る場合が気になった。
        * ライブラリの場合、Assertなどで勝手に処理を終了するべきには行かないと思う。
        * この場合、例外をスローして、「どう扱うかは利用側の自由だよ」とさせるのが正解だろうか。

#### ラムダ式(デリゲートとかFuncとか)
* [@IT C# ラムダ式 基本文法最速マスター](http://www.atmarkit.co.jp/fdotnet/rapidmaster/rapidmaster_01/rapidmaster_01.html)
    * ラムダ式に関する基本は、ここを見返せばOK。
    * ここの記事を見れば分かる通り、C#は「ただのメソッド定義 -> デリゲート -> ラムダ式」という順番で言語機能が発展している。
* [デリゲートとラムダ式の書き換え](https://www.ipentec.com/document/document.aspx?page=csharp-rewriting-delegate-and-lambda-expression)
    * 上記の@ITの記事では、仮引数でラムダ式を取る方法が載っていないため、こちらで補うこと。
    * デリゲートを使う方法もあるけど、基本的には`Func<T1, T2, ..., TReturn>`を使う方法が良いだろう。

#### プロパティ
* [Qiita インスペクターで値も設定したいけど，プロパティを使いたい。めんどくさいのも嫌！](http://qiita.com/RyotaMurohoshi/items/b64b36009ba652b21e2c)
    * Unityにおいて、プロパティを使いつつも、インスペクタ上でプロパティに値を仕込めるようにする方法。

#### ユニットテスト
* [CodeZine NUnitの全貌 ～ 基本から、最新バージョンの新機能まで](http://codezine.jp/article/detail/6518)
    * NUnitのあらゆる機能のサンプルが載っている良記事。
    * Unityでテストする場合、使えない機能も多いはずなので要注意。
* [Effective Unit Testing](http://bradwilson.io/presentations/content/effective-unit-testing.pdf)
    * 一応C#について扱っているが、C#というよりは良いユニットテスト一般に関する記事。
